--Convex Hull

SELECT postgis.ST_AsText(postgis.ST_ConvexHull(
	postgis.ST_Collect(postgis.ST_GeomFromText('MULTIPOINT(-118.28978130364372 34.02915895101439, -118.28877811331142 34.025165140660505, -118.28778641476693 34.02455057717112, -118.28790613270121 34.024347849238985, -118.28649257120999 34.0234812899713, -118.28399209658883 34.02283915994765, -118.28303417463964 34.022291320060326, -118.28182255860257 34.02185378599355, -118.28261582191872 34.02038364208678, -118.28357121316706 34.01971600373234, -118.28533453255395 34.020253880814293, -118.28771079205417 34.02135613073302,
	-118.28898640360524 34.020957131901774)'))) );


--Nearest Neighbours

CREATE TABLE locations(name VARCHAR(15), geocode POINT NOT NULL);

INSERT INTO locations (name, geocode)
VALUES ('Home', POINT(-118.28978130364372,34.02915895101439)),
       ('ESH', POINT(-118.28877811331142,34.025165140660505)),
       ('LRC', POINT(-118.28778641476693,34.02455057717112)),
       ('JEF', POINT(-118.28790613270121,34.024347849238985)),
       ('KDC', POINT(-118.28649257120999,34.0234812899713)),
       ('THH', POINT(-118.28399209658883,34.02283915994765)),
       ('MRF', POINT(-118.28303417463964,34.022291320060326)),
       ('PSD', POINT(-118.28182255860257,34.02185378599355)),
       ('PSX', POINT(-118.28261582191872,34.02038364208678)),
       ('JHH', POINT(-118.28357121316706,34.01971600373234)),
       ('TOMMY TROJAN', POINT(-118.28533453255395,34.020253880814293)),
       ('GFS', POINT(-118.28771079205417,34.02135613073302)),
       ('SGM', POINT(-118.28898640360524,34.020957131901774));

SELECT * FROM locations;

SELECT name, geocode
FROM locations
WHERE name != 'Home'
ORDER BY POINT(-118.28978130364372,34.02915895101439) <-> geocode
LIMIT 4;


